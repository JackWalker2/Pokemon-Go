//
//  CoreDateHelp.swift
//  Pokemon Go
//
//  Created by Jack Walker on 4/4/17.
//  Copyright Â© 2017 Jack Walker. All rights reserved.
//

import UIKit
import CoreData

func addAllPokemon() {
    
    createPokemon(name: "Bulbasaur", imageName: "001")
    createPokemon(name: "Ivysaur", imageName: "002")
    createPokemon(name: "Venasaur", imageName: "003")
    createPokemon(name: "Charmander", imageName: "004")
    createPokemon(name: "Charmeleon", imageName: "005")
    createPokemon(name: "Charizard", imageName: "006")
    createPokemon(name: "Squirtle", imageName: "007")
    createPokemon(name: "Wortortle", imageName: "008")
    createPokemon(name: "Blastoise", imageName: "009")
    createPokemon(name: "Caterpie", imageName: "010")
    createPokemon(name: "Metapod", imageName: "011")
    createPokemon(name: "Butterfree", imageName: "012")
    createPokemon(name: "Weedle", imageName: "013")
    createPokemon(name: "Kakuna", imageName: "014")
    createPokemon(name: "Beedrill", imageName: "015")
    createPokemon(name: "Pidgey", imageName: "016")
    createPokemon(name: "Pidgeotto", imageName: "017")
    createPokemon(name: "Pidgeot", imageName: "018")
    createPokemon(name: "Rattata", imageName: "019")
    createPokemon(name: "Ratticate", imageName: "020")
    createPokemon(name: "Spearow", imageName: "021")
    createPokemon(name: "Fearow", imageName: "022")
    createPokemon(name: "Ekans", imageName: "023")
    createPokemon(name: "Arbok", imageName: "024")
    createPokemon(name: "Pikachu", imageName: "025")
    createPokemon(name: "Raichu", imageName: "026")
    createPokemon(name: "Sandshrew", imageName: "027")
    createPokemon(name: "Sandslash", imageName: "028")
    createPokemon(name: "Nidoran", imageName: "029")
    createPokemon(name: "Nidorina", imageName: "030")
    createPokemon(name: "Nidoqueen", imageName: "031")
    createPokemon(name: "Nidoran", imageName: "032")
    createPokemon(name: "Nidorino", imageName: "033")
    createPokemon(name: "Nidoking", imageName: "034")
    createPokemon(name: "Clefairy", imageName: "035")
    createPokemon(name: "Clefable", imageName: "036")
    createPokemon(name: "Vulpix", imageName: "037")
    createPokemon(name: "Ninetales", imageName: "038")
    createPokemon(name: "Jigglypuff", imageName: "039")
    createPokemon(name: "Wigglytuff", imageName: "040")
    createPokemon(name: "Zubat", imageName: "041")
    createPokemon(name: "Golbat", imageName: "042")
    createPokemon(name: "Oddish", imageName: "043")
    createPokemon(name: "Gloom", imageName: "044")
    createPokemon(name: "Vileplume", imageName: "045")
    createPokemon(name: "Paras", imageName: "046")
    createPokemon(name: "Parasect", imageName: "047")
    createPokemon(name: "Venonat", imageName: "048")
    createPokemon(name: "Venomoth", imageName: "049")
    createPokemon(name: "Diglett", imageName: "050")
    createPokemon(name: "Dugtrio", imageName: "051")
    createPokemon(name: "Meowth", imageName: "052")
    createPokemon(name: "Persian", imageName: "053")
    createPokemon(name: "Psyduck", imageName: "054")
    createPokemon(name: "Golduck", imageName: "055")
    createPokemon(name: "Mankey", imageName: "056")
    createPokemon(name: "Primeape", imageName: "057")
    createPokemon(name: "Growlithe", imageName: "058")
    createPokemon(name: "Arcanine", imageName: "059")
    createPokemon(name: "Poliwag", imageName: "060")
    createPokemon(name: "Poliwhirl", imageName: "061")
    createPokemon(name: "Poliwrath", imageName: "062")
    createPokemon(name: "Abra", imageName: "063")
    createPokemon(name: "Kadabra", imageName: "064")
    createPokemon(name: "Alakazam", imageName: "065")
    createPokemon(name: "Machop", imageName: "066")
    createPokemon(name: "Machoke", imageName: "067")
    createPokemon(name: "Machamp", imageName: "068")
    createPokemon(name: "Bellsprout", imageName: "069")
    createPokemon(name: "Weepinbell", imageName: "070")
    createPokemon(name: "Victreebell", imageName: "071")
    createPokemon(name: "Tentacool", imageName: "072")
    createPokemon(name: "Tentacruel", imageName: "073")
    createPokemon(name: "Geodude", imageName: "074")
    createPokemon(name: "Graveler", imageName: "075")
    createPokemon(name: "Golem", imageName: "076")
    createPokemon(name: "Ponyta", imageName: "077")
    createPokemon(name: "Rapidash", imageName: "078")
    createPokemon(name: "Slowpoke", imageName: "079")
    createPokemon(name: "Slowbro", imageName: "080")
    createPokemon(name: "Magnemite", imageName: "081")
    createPokemon(name: "Megneton", imageName: "082")
    createPokemon(name: "Farfetch'd", imageName: "083")
    createPokemon(name: "Doduo", imageName: "084")
    createPokemon(name: "Dodrio", imageName: "085")
    createPokemon(name: "Seel", imageName: "086")
    createPokemon(name: "Dewgong", imageName: "087")
    createPokemon(name: "Grimer", imageName: "088")
    createPokemon(name: "Muk", imageName: "089")
    createPokemon(name: "Shellder", imageName: "090")
    createPokemon(name: "Cloyster", imageName: "091")
    createPokemon(name: "Gastly", imageName: "092")
    createPokemon(name: "Haunter", imageName: "093")
    createPokemon(name: "Gengar", imageName: "094")
    createPokemon(name: "Onix", imageName: "095")
    createPokemon(name: "Drowzee", imageName: "096")
    createPokemon(name: "Hypno", imageName: "097")
    createPokemon(name: "Krabby", imageName: "098")
    createPokemon(name: "Kingler", imageName: "099")
    createPokemon(name: "Voltorb", imageName: "100")
    createPokemon(name: "Electrode", imageName: "101")
    createPokemon(name: "Exeggcute", imageName: "102")
    createPokemon(name: "Exeggutor", imageName: "103")
    createPokemon(name: "Cubone", imageName: "104")
    createPokemon(name: "Marowak", imageName: "105")
    createPokemon(name: "Hitmonlee", imageName: "106")
    createPokemon(name: "Hitmonchan", imageName: "107")
    createPokemon(name: "Lickitung", imageName: "108")
    createPokemon(name: "Koffing", imageName: "109")
    createPokemon(name: "Weezing", imageName: "110")
    createPokemon(name: "Rhydon", imageName: "111")
    createPokemon(name: "Rhyhorn", imageName: "112")
    createPokemon(name: "Chansey", imageName: "113")
    createPokemon(name: "Tangela", imageName: "114")
    createPokemon(name: "Kangaskan", imageName: "115")
    createPokemon(name: "Horsea", imageName: "116")
    createPokemon(name: "Kingdra", imageName: "117")
    createPokemon(name: "Goldeen", imageName: "118")
    createPokemon(name: "Seaking", imageName: "119")
    createPokemon(name: "Staryu", imageName: "120")
    createPokemon(name: "Starmie", imageName: "121")
    createPokemon(name: "Mr Mime", imageName: "122")
    createPokemon(name: "Scyther", imageName: "123")
    createPokemon(name: "Jynx", imageName: "124")
    createPokemon(name: "Electabuzz", imageName: "125")
    createPokemon(name: "Magmar", imageName: "126")
    createPokemon(name: "Pinsir", imageName: "127")
    createPokemon(name: "Tauros", imageName: "128")
    createPokemon(name: "Magikarp", imageName: "129")
    createPokemon(name: "Gyrados", imageName: "130")
    createPokemon(name: "Lapras", imageName: "131")
    createPokemon(name: "Ditto", imageName: "132")
    createPokemon(name: "Eevee", imageName: "133")
    createPokemon(name: "Vapereon", imageName: "134")
    createPokemon(name: "Jolteon", imageName: "135")
    createPokemon(name: "Flareon", imageName: "136")
    createPokemon(name: "Porygon", imageName: "137")
    createPokemon(name: "Omanyte", imageName: "138")
    createPokemon(name: "Omastar", imageName: "139")
    createPokemon(name: "Kabuto", imageName: "140")
    createPokemon(name: "Kabutops", imageName: "141")
    createPokemon(name: "Aerodactyl", imageName: "142")
    createPokemon(name: "Snorlax", imageName: "143")
    createPokemon(name: "Articuno", imageName: "144")
    createPokemon(name: "Zapdos", imageName: "145")
    createPokemon(name: "Moltres", imageName: "146")
    createPokemon(name: "Dratini", imageName: "147")
    createPokemon(name: "Dragonaire", imageName: "148")
    createPokemon(name: "Dragonite", imageName: "149")
    createPokemon(name: "Mewtwo", imageName: "150")
    createPokemon(name: "Mew", imageName: "151")
    
    (UIApplication.shared.delegate as! AppDelegate).saveContext()
    
}

func createPokemon(name :String, imageName: String) {
    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext
    
    let pokemon = Pokemon(context: context)
    pokemon.name = name
    pokemon.imageName = imageName
}

func getAllPokemon() -> [Pokemon] {
    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext
    do {
    let pokemons = try context.fetch(Pokemon.fetchRequest()) as! [Pokemon]
        
        if pokemons.count == 0 {
            addAllPokemon()
            return getAllPokemon()
        }
        
        return pokemons
    } catch {}
    
    return []
}

func getAllCaughtPokemons() -> [Pokemon] {
    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext

    let fetchRequest = Pokemon.fetchRequest() as NSFetchRequest<Pokemon>
    fetchRequest.predicate = NSPredicate(format: "caught == %@", true as CVarArg)
    
    do {
        let pokemons = try context.fetch(fetchRequest) as [Pokemon]
        return pokemons
    } catch {}
    return []
}

// Fetch Request to have sorted PokeDex
/* 
let fec:NSFetchRequest = YourEntity.fetchRequest()
let sortDescriptor = NSSortDescriptor(key: "type", ascending ture)
fec.sortDescriptors = [sortDescriptor]
let items = try! context.fetch(fec)
*/

func getAllUncaughtPokemons() -> [Pokemon] {
    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext
    
    let fetchRequest = Pokemon.fetchRequest() as NSFetchRequest<Pokemon>
    fetchRequest.predicate = NSPredicate(format: "caught == %@", false as CVarArg)
    
    do {
        let pokemons = try context.fetch(fetchRequest) as [Pokemon]
        return pokemons
    } catch {}
    return []
}
